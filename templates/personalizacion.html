{% extends "base.html" %}

{% block title %}Personalizaci√≥n Hiperpersonalizada - Iberdrola AI{% endblock %}

{% block page_title %}Personalizaci√≥n Hiperpersonalizada{% endblock %}

{% block content %}
<!-- Documentation Panel Toggle -->
<button class="doc-panel-toggle" aria-label="Ocultar documentaci√≥n">
    <span class="icon">üìö</span>
    <span>Ocultar Panel</span>
</button>

<!-- Documentation Panel -->
<div class="doc-panel">
    <div class="doc-panel-header">
        <div class="doc-panel-title">
            <h2>üë§ Personalizaci√≥n Hiperpersonalizada</h2>
            <p>Gu√≠a t√©cnica completa del caso de uso</p>
        </div>
        <div class="doc-panel-header-actions">
            <button class="doc-edit-btn" aria-label="Editar documentaci√≥n">
                <span>‚úèÔ∏è</span> Editar
            </button>
            <button class="doc-panel-close" aria-label="Cerrar">√ó</button>
        </div>
    </div>
    
    <div class="doc-panel-content">
        <!-- Resumen -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">üìã</span>
                Resumen Ejecutivo
            </h3>
            <div class="doc-section-content">
                <p>
                    La <strong>Personalizaci√≥n Hiperpersonalizada</strong> utiliza sistemas de recomendaci√≥n basados en 
                    Machine Learning para generar ofertas y contenidos √∫nicos para cada cliente. El sistema combina 
                    Collaborative Filtering, Content-Based Filtering y Deep Learning para crear un modelo h√≠brido 
                    que aprende de las interacciones hist√≥ricas y predice preferencias futuras.
                </p>
                
                <p>
                    <strong>Fuentes de Datos Procesadas:</strong>
                </p>
                <ul>
                    <li><strong>Datos de Consumo:</strong> Series temporales de consumo el√©ctrico (kWh por hora/d√≠a), 
                    patrones estacionales, picos de demanda, horarios de uso</li>
                    <li><strong>Datos de Interacci√≥n:</strong> Clicks en web/app, tiempo en p√°gina, productos vistos, 
                    emails abiertos, respuestas a campa√±as</li>
                    <li><strong>Datos Transaccionales:</strong> Historial de productos contratados, upgrades, 
                    cancelaciones, cambios de tarifa</li>
                    <li><strong>Datos Contextuales:</strong> Ubicaci√≥n geogr√°fica, tipo de vivienda, meteorolog√≠a, 
                    eventos locales, d√≠a de la semana</li>
                    <li><strong>Datos Demogr√°ficos:</strong> Edad, composici√≥n familiar, ingresos estimados, 
                    segmento de cliente</li>
                </ul>
                
                <div class="doc-highlight-box">
                    <strong>üîÑ Pipeline de Procesamiento</strong><br>
                    Los datos se ingestan en tiempo real ‚Üí Se normalizan y transforman ‚Üí Se generan features 
                    (embeddings de usuario/producto) ‚Üí Los modelos predicen scores de afinidad ‚Üí Se rankean 
                    las recomendaciones ‚Üí Se aplican reglas de negocio ‚Üí Se entregan v√≠a API en <200ms
                </div>
                
                <p>
                    <strong>Output del Sistema:</strong>
                </p>
                <ul>
                    <li><strong>Recomendaciones de Productos:</strong> Lista rankeada de productos/servicios con 
                    scores de probabilidad de conversi√≥n (0-1)</li>
                    <li><strong>Contenido Personalizado:</strong> Banners, emails, notificaciones adaptados al 
                    perfil del usuario</li>
                    <li><strong>Ofertas Din√°micas:</strong> Descuentos y promociones calculados seg√∫n propensi√≥n 
                    a comprar y valor del cliente</li>
                    <li><strong>Momento √ìptimo:</strong> Predicci√≥n del mejor momento para contactar (hora/d√≠a) 
                    basado en patrones hist√≥ricos</li>
                    <li><strong>Canal Preferido:</strong> Email, SMS, push notification, o llamada seg√∫n historial 
                    de respuesta</li>
                </ul>
            </div>
        </div>
        
        <!-- Modelos de IA -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">ü§ñ</span>
                Modelos de IA Aplicados
            </h3>
            <div class="doc-section-content">
                <p>
                    El sistema de personalizaci√≥n utiliza un <strong>ensemble de modelos de IA</strong> que trabajan 
                    en conjunto para proporcionar recomendaciones precisas y contextualizadas. Cada modelo aporta 
                    una perspectiva √∫nica y complementaria, creando un sistema robusto y adaptable.
                </p>
                
                <div class="doc-model-card">
                    <div class="doc-model-name">
                        üß† Collaborative Filtering (Matrix Factorization)
                    </div>
                    <div class="doc-model-desc">
                        <p>
                            Identifica patrones de comportamiento entre clientes similares para recomendar 
                            productos y servicios que han funcionado con perfiles parecidos. Este enfoque se basa 
                            en la premisa de que usuarios con comportamientos similares en el pasado tendr√°n 
                            preferencias similares en el futuro.
                        </p>
                        <p>
                            <strong>Funcionamiento t√©cnico:</strong> Descompone la matriz usuario-producto en matrices 
                            latentes de menor dimensi√≥n, capturando factores ocultos que explican las preferencias. 
                            Utiliza SVD++ (Singular Value Decomposition) y ALS (Alternating Least Squares) para 
                            optimizaci√≥n escalable con millones de usuarios.
                        </p>
                        <p>
                            <strong>Aplicaci√≥n pr√°ctica:</strong> Si un cliente con perfil de consumo similar al tuyo 
                            contrat√≥ un plan solar, el sistema te lo recomendar√° con alta prioridad. Precisi√≥n t√≠pica: 
                            RMSE < 0.85 en escala 1-5.
                        </p>
                    </div>
                    <div class="doc-tech-stack">
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">‚öôÔ∏è</div>
                            <div class="doc-tech-name">SVD++</div>
                        </div>
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">üìä</div>
                            <div class="doc-tech-name">ALS</div>
                        </div>
                    </div>
                </div>
                
                <div class="doc-model-card">
                    <div class="doc-model-name">
                        üéØ Deep Learning - Neural Collaborative Filtering
                    </div>
                    <div class="doc-model-desc">
                        <p>
                            Red neuronal profunda que aprende representaciones complejas de usuarios y productos 
                            para capturar relaciones no lineales en las preferencias. A diferencia del collaborative 
                            filtering tradicional, este modelo puede descubrir patrones mucho m√°s sofisticados.
                        </p>
                        <p>
                            <strong>Arquitectura:</strong> Utiliza embeddings densos para usuarios y productos, 
                            seguidos de m√∫ltiples capas fully-connected con activaciones ReLU. La arquitectura 
                            t√≠pica incluye 3-5 capas ocultas con 128-512 neuronas cada una, dropout para 
                            regularizaci√≥n, y batch normalization para estabilidad del entrenamiento.
                        </p>
                        <p>
                            <strong>Ventaja clave:</strong> Supera a m√©todos lineales en un 15-20% en m√©tricas 
                            de precisi√≥n (NDCG@10 > 0.78). Especialmente efectivo para capturar interacciones 
                            complejas entre m√∫ltiples caracter√≠sticas del usuario y contexto temporal.
                        </p>
                    </div>
                    <div class="doc-tech-stack">
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">üî∑</div>
                            <div class="doc-tech-name">TensorFlow</div>
                        </div>
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">üî∂</div>
                            <div class="doc-tech-name">PyTorch</div>
                        </div>
                    </div>
                </div>
                
                <div class="doc-model-card">
                    <div class="doc-model-name">
                        üìà Propensity Scoring (Gradient Boosting)
                    </div>
                    <div class="doc-model-desc">
                        <p>
                            Calcula la probabilidad de que un cliente acepte una oferta espec√≠fica bas√°ndose 
                            en caracter√≠sticas demogr√°ficas, comportamentales y contextuales. Este modelo es 
                            fundamental para priorizar qu√© ofertas mostrar a qu√© clientes.
                        </p>
                        <p>
                            <strong>Features utilizadas (200+):</strong> Consumo energ√©tico hist√≥rico, variabilidad 
                            estacional, engagement con campa√±as previas, tiempo como cliente, productos contratados, 
                            interacciones con servicio al cliente, datos demogr√°ficos, se√±ales de navegaci√≥n web, 
                            y muchas m√°s variables engineered.
                        </p>
                        <p>
                            <strong>Performance:</strong> AUC-ROC > 0.87 en validaci√≥n, lo que significa que el 
                            modelo distingue correctamente entre clientes que aceptar√°n vs. rechazar√°n una oferta 
                            el 87% de las veces. Calibraci√≥n de probabilidades mediante Platt Scaling para 
                            estimaciones precisas.
                        </p>
                    </div>
                    <div class="doc-tech-stack">
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">üå≤</div>
                            <div class="doc-tech-name">XGBoost</div>
                        </div>
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">üí°</div>
                            <div class="doc-tech-name">LightGBM</div>
                        </div>
                    </div>
                </div>
                
                <div class="doc-model-card">
                    <div class="doc-model-name">
                        üí¨ NLP - An√°lisis de Sentimiento y Preferencias
                    </div>
                    <div class="doc-model-desc">
                        <p>
                            Analiza interacciones textuales (emails, chat, encuestas, redes sociales) para extraer 
                            preferencias impl√≠citas y nivel de satisfacci√≥n del cliente. Este componente a√±ade una 
                            dimensi√≥n cualitativa crucial que los datos estructurados no capturan.
                        </p>
                        <p>
                            <strong>Capacidades:</strong> An√°lisis de sentimiento (positivo/negativo/neutral), 
                            extracci√≥n de entidades (productos mencionados, problemas espec√≠ficos), clasificaci√≥n 
                            de intenciones (queja, consulta, elogio), y detecci√≥n de temas emergentes mediante 
                            topic modeling.
                        </p>
                        <p>
                            <strong>Modelos utilizados:</strong> BERT fine-tuned en datos del sector energ√©tico 
                            para an√°lisis de sentimiento (F1-Score: 0.89), GPT-4 para extracci√≥n de insights 
                            complejos y generaci√≥n de res√∫menes de interacciones. Los embeddings textuales se 
                            integran como features adicionales en los modelos de recomendaci√≥n.
                        </p>
                    </div>
                    <div class="doc-tech-stack">
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">ü§ó</div>
                            <div class="doc-tech-name">BERT</div>
                        </div>
                        <div class="doc-tech-item">
                            <div class="doc-tech-icon">ü¶ú</div>
                            <div class="doc-tech-name">GPT-4</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Arquitectura T√©cnica -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">üèóÔ∏è</span>
                Arquitectura T√©cnica
            </h3>
            <div class="doc-section-content">
                <p>
                    La arquitectura del sistema est√° dise√±ada para escalar horizontalmente y procesar millones de 
                    eventos diarios con latencias inferiores a 100ms. Utiliza un enfoque de <strong>microservicios</strong> 
                    desplegados en Azure Kubernetes Service (AKS) con auto-scaling basado en m√©tricas de carga.
                </p>
                
                <p><strong>Stack Tecnol√≥gico Completo:</strong></p>
                <ul>
                    <li><strong>Salesforce Marketing Cloud:</strong> Orquestaci√≥n de campa√±as multicanal (email, SMS, push, web). 
                    Journey Builder para automatizaci√≥n de flujos personalizados. Integraci√≥n bidireccional con el motor 
                    de recomendaciones mediante APIs REST.</li>
                    
                    <li><strong>Azure Machine Learning:</strong> Plataforma MLOps completa para entrenamiento, validaci√≥n, 
                    deployment y monitorizaci√≥n de modelos. Pipelines automatizados para reentrenamiento. Model Registry 
                    para versionado y governance.</li>
                    
                    <li><strong>Azure Databricks:</strong> Procesamiento distribuido de datos masivos (petabytes). 
                    Feature Store centralizado para reutilizaci√≥n de features entre modelos. Notebooks colaborativos 
                    para experimentaci√≥n de Data Scientists.</li>
                    
                    <li><strong>Azure Cognitive Services:</strong> Text Analytics para NLP (an√°lisis de sentimiento, 
                    extracci√≥n de entidades, detecci√≥n de idioma). Integraci√≥n con OpenAI Service para GPT-4.</li>
                    
                    <li><strong>Power BI:</strong> Dashboards en tiempo real para monitorizaci√≥n de KPIs de negocio 
                    y t√©cnicos. Alertas autom√°ticas cuando m√©tricas caen fuera de umbrales. Reportes ejecutivos 
                    semanales automatizados.</li>
                    
                    <li><strong>Azure Synapse Analytics:</strong> Data warehouse centralizado con arquitectura medallion 
                    (bronze/silver/gold). Integraci√≥n con 20+ fuentes de datos. Capacidad de consulta de 100TB+ con 
                    latencias sub-segundo.</li>
                    
                    <li><strong>Azure Kubernetes Service (AKS):</strong> Orquestaci√≥n de contenedores para microservicios 
                    de inferencia. Auto-scaling horizontal basado en CPU/memoria. Blue-green deployments para zero-downtime.</li>
                    
                    <li><strong>Azure API Management:</strong> Gateway centralizado para APIs de recomendaciones. 
                    Rate limiting, caching, autenticaci√≥n OAuth 2.0. Monitorizaci√≥n de latencias y errores.</li>
                </ul>
                
                <p><strong>Flujo de Datos End-to-End:</strong></p>
                <ol class="doc-steps">
                    <li>
                        <strong>Ingesta de Datos en Tiempo Real</strong><br>
                        Azure Event Hubs recibe eventos de consumo energ√©tico (smart meters), interacciones web 
                        (Google Analytics 4), CRM (Salesforce), sistemas transaccionales, y canales digitales. 
                        Throughput: 1M+ eventos/segundo. Latencia: <5 segundos desde generaci√≥n hasta disponibilidad.
                    </li>
                    <li>
                        <strong>Procesamiento y Limpieza</strong><br>
                        Azure Stream Analytics procesa eventos en tiempo real, filtra anomal√≠as, enriquece con 
                        datos de referencia, y persiste en Data Lake (formato Delta). Databricks ejecuta jobs 
                        batch nocturnos para agregaciones y c√°lculos complejos.
                    </li>
                    <li>
                        <strong>Feature Engineering Avanzado</strong><br>
                        Creaci√≥n de 200+ variables predictivas: consumo promedio/mediana/percentiles por hora del d√≠a, 
                        d√≠a de la semana, mes; variabilidad estacional; engagement score (weighted sum de interacciones); 
                        recency/frequency/monetary (RFM); propensi√≥n hist√≥rica a ofertas; similitud con clusters; 
                        embeddings de comportamiento (dimensi√≥n 64); y muchas m√°s. Feature Store centralizado en 
                        Databricks para consistencia entre entrenamiento e inferencia.
                    </li>
                    <li>
                        <strong>Entrenamiento de Modelos (MLOps)</strong><br>
                        Entrenamiento batch diario con datos de los √∫ltimos 12 meses (ventana deslizante). 
                        Validaci√≥n cruzada temporal (time-series split) para evitar data leakage. Hyperparameter 
                        tuning con Optuna (100+ trials). A/B testing de modelos candidatos antes de promoci√≥n a 
                        producci√≥n. Reentrenamiento autom√°tico cuando m√©tricas de performance degradan >5%.
                    </li>
                    <li>
                        <strong>Deployment y Scoring en Tiempo Real</strong><br>
                        Modelos desplegados como APIs REST en AKS con 10+ r√©plicas para alta disponibilidad. 
                        Latencia p95 < 80ms, p99 < 150ms. Caching inteligente de recomendaciones con TTL de 1 hora. 
                        Fallback a recomendaciones basadas en reglas si el modelo falla. Canary deployments para 
                        validaci√≥n gradual de nuevas versiones.
                    </li>
                    <li>
                        <strong>Orquestaci√≥n de Campa√±as</strong><br>
                        Salesforce Marketing Cloud consume recomendaciones v√≠a API y ejecuta campa√±as personalizadas. 
                        Journey Builder define flujos multi-step con condiciones din√°micas. Contenido din√°mico 
                        (AMPscript) renderiza ofertas personalizadas. Frecuency capping para evitar fatiga del cliente.
                    </li>
                    <li>
                        <strong>Medici√≥n, A/B Testing y Optimizaci√≥n Continua</strong><br>
                        Tracking de conversiones y atribuci√≥n multi-touch. A/B testing continuo de estrategias de 
                        recomendaci√≥n (collaborative filtering vs. deep learning vs. hybrid). An√°lisis de uplift 
                        incremental vs. grupo de control. Reentrenamiento autom√°tico semanal con feedback loop de 
                        conversiones reales. Dashboard ejecutivo con ROI actualizado diariamente.
                    </li>
                </ol>
                
                <p><strong>Consideraciones de Escalabilidad y Performance:</strong></p>
                <ul>
                    <li><strong>Throughput:</strong> Sistema dimensionado para 10M de clientes activos, 50M de 
                    recomendaciones diarias, 1000 requests/segundo en picos.</li>
                    
                    <li><strong>Alta Disponibilidad:</strong> SLA 99.9% uptime. Multi-regi√≥n activo-pasivo para 
                    disaster recovery. Backups autom√°ticos cada 6 horas.</li>
                    
                    <li><strong>Seguridad:</strong> Encriptaci√≥n end-to-end (TLS 1.3, AES-256). Datos PII anonimizados 
                    en entornos no-productivos. GDPR compliant con derecho al olvido implementado.</li>
                    
                    <li><strong>Monitorizaci√≥n:</strong> Azure Monitor + Application Insights para observabilidad 
                    completa. Alertas proactivas en Slack/Teams. On-call rotation 24/7 para incidentes cr√≠ticos.</li>
                </ul>
            </div>
        </div>
        
        <!-- Casos de Uso Espec√≠ficos -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">üí°</span>
                Casos de Uso Espec√≠ficos
            </h3>
            <div class="doc-section-content">
                <p>
                    El sistema de personalizaci√≥n se aplica a trav√©s de m√∫ltiples puntos de contacto con el cliente, 
                    creando una experiencia omnicanal coherente y personalizada. A continuaci√≥n se detallan los casos 
                    de uso m√°s impactantes con ejemplos concretos de implementaci√≥n:
                </p>
                
                <p><strong>1. Recomendaci√≥n de Tarifas Personalizadas</strong></p>
                <p>
                    El sistema analiza el perfil de consumo energ√©tico del cliente para recomendar la tarifa √≥ptima 
                    que maximice su ahorro. Este es uno de los casos de uso con mayor impacto directo en satisfacci√≥n 
                    y retenci√≥n.
                </p>
                <ul>
                    <li><strong>An√°lisis del perfil de consumo horario:</strong> Procesamiento de datos de smart meters 
                    con granularidad horaria. Identificaci√≥n de patrones: ¬øel cliente consume m√°s durante el d√≠a o la noche? 
                    ¬øTiene picos de consumo en fines de semana? ¬øVar√≠a estacionalmente?</li>
                    
                    <li><strong>Predicci√≥n de consumo futuro:</strong> Modelos de series temporales (Prophet, LSTM) 
                    predicen el consumo de los pr√≥ximos 12 meses considerando tendencias, estacionalidad, y eventos 
                    especiales. Precisi√≥n: MAPE < 8%.</li>
                    
                    <li><strong>Optimizaci√≥n de tarifa:</strong> Algoritmo de optimizaci√≥n calcula el ahorro potencial 
                    para cada tarifa disponible (fija, discriminaci√≥n horaria, indexada). Recomendaci√≥n incluye ahorro 
                    estimado en ‚Ç¨/a√±o y periodo de amortizaci√≥n si hay cambio de contador.</li>
                    
                    <li><strong>Ejemplo real:</strong> Cliente con consumo nocturno elevado (carga de veh√≠culo el√©ctrico) 
                    recibe recomendaci√≥n de tarifa discriminaci√≥n horaria con ahorro estimado de ‚Ç¨450/a√±o. Tasa de 
                    conversi√≥n: 42% vs. 8% en campa√±as gen√©ricas.</li>
                </ul>
                
                <p><strong>2. Ofertas de Servicios Adicionales (Cross-selling Inteligente)</strong></p>
                <p>
                    Identificaci√≥n proactiva de necesidades del cliente y recomendaci√≥n de servicios complementarios 
                    con alta probabilidad de aceptaci√≥n.
                </p>
                <ul>
                    <li><strong>Instalaci√≥n Solar:</strong> Clientes con consumo elevado, vivienda en propiedad, y 
                    ubicaci√≥n con alta irradiaci√≥n solar reciben propuesta personalizada de instalaci√≥n fotovoltaica. 
                    C√°lculo de ROI incluido (t√≠picamente 6-8 a√±os). Propensi√≥n score > 0.7 ‚Üí contacto proactivo.</li>
                    
                    <li><strong>Mantenimiento de Calderas:</strong> Clientes con caldera de gas >8 a√±os reciben oferta 
                    de mantenimiento preventivo antes de la temporada de invierno. Timing optimizado mediante an√°lisis 
                    de datos meteorol√≥gicos. Conversi√≥n: 28%.</li>
                    
                    <li><strong>Seguros del Hogar:</strong> Clientes sin seguro contratado (inferido por ausencia de 
                    producto) reciben oferta bundled con descuento. Segmentaci√≥n por valor de vivienda estimado.</li>
                    
                    <li><strong>Movilidad El√©ctrica:</strong> Clientes con incremento s√∫bito de consumo nocturno 
                    (indicador de VE) reciben ofertas de tarifa espec√≠fica + wallbox + puntos de recarga p√∫blicos.</li>
                    
                    <li><strong>Eventos de vida:</strong> Sistema detecta mudanzas (cambio de direcci√≥n), compra de 
                    vivienda (incremento de consumo), nacimientos (aumento de consumo diurno), y activa campa√±as 
                    contextualizadas. Timing es cr√≠tico: ventana de oportunidad de 30-60 d√≠as.</li>
                </ul>
                
                <p><strong>3. Contenido Din√°mico en Emails (1:1 Personalization)</strong></p>
                <p>
                    Cada email es √∫nico, generado din√°micamente en el momento de apertura con contenido ultra-relevante 
                    para ese cliente espec√≠fico.
                </p>
                <ul>
                    <li><strong>Subject Line Personalizado:</strong> A/B testing autom√°tico de 5-10 variantes de subject 
                    line por segmento. Ganador se aplica al resto del segmento. Incluye nombre, localizaci√≥n, o beneficio 
                    espec√≠fico. Incremento de open rate: +35%.</li>
                    
                    <li><strong>Hero Image Din√°mica:</strong> Imagen principal del email var√≠a seg√∫n perfil: familia con 
                    ni√±os ve imagen familiar, joven urbano ve imagen de ciudad, senior ve imagen de tranquilidad. 
                    Generaci√≥n con IA (DALL-E) si no hay imagen en biblioteca.</li>
                    
                    <li><strong>Recomendaciones de Productos:</strong> Bloque de 3-4 productos recomendados por el motor 
                    de ML, renderizados din√°micamente. Cada producto incluye beneficio personalizado ("Ahorra ‚Ç¨X/a√±o 
                    basado en tu consumo").</li>
                    
                    <li><strong>Consejos de Ahorro:</strong> Tips personalizados basados en an√°lisis de consumo. Ejemplo: 
                    "Tu consumo en standby representa el 12% de tu factura (‚Ç¨18/mes). Aqu√≠ tienes 3 formas de reducirlo..."</li>
                    
                    <li><strong>CTAs Optimizados:</strong> Texto, color, y posici√≥n del CTA optimizados mediante 
                    reinforcement learning. Variantes: "Ver mi ahorro", "Calcular mi plan", "Quiero ahorrar", etc.</li>
                </ul>
                
                <p><strong>4. Experiencia Web Personalizada (Real-Time Personalization)</strong></p>
                <p>
                    El sitio web se adapta en tiempo real al perfil y comportamiento del usuario, creando una experiencia 
                    √∫nica para cada visitante.
                </p>
                <ul>
                    <li><strong>Homepage Adaptativa:</strong> Layout, hero section, y contenido destacado var√≠an seg√∫n 
                    segmento. Cliente nuevo ve propuesta de valor y proceso de alta. Cliente existente ve dashboard 
                    personalizado con consumo, facturas, y recomendaciones.</li>
                    
                    <li><strong>Banners Contextuales:</strong> Sistema de gesti√≥n de banners con targeting avanzado: 
                    ubicaci√≥n geogr√°fica, hora del d√≠a, dispositivo, historial de navegaci√≥n, productos contratados, 
                    propensi√≥n a ofertas. Rotaci√≥n autom√°tica con Thompson Sampling para optimizaci√≥n continua.</li>
                    
                    <li><strong>Simuladores Personalizados:</strong> Simulador de tarifas pre-poblado con datos reales 
                    del cliente (consumo, potencia). Resultados ordenados por ahorro potencial. Integraci√≥n con CRM 
                    para seguimiento de leads.</li>
                    
                    <li><strong>Chatbot Contextualizado:</strong> Chatbot con acceso al perfil completo del cliente. 
                    Respuestas personalizadas: "Tu √∫ltima factura fue de ‚Ç¨X el d√≠a Y", "Tu consumo este mes va un Z% 
                    por encima de lo habitual". Escalado inteligente a agente humano cuando detecta frustraci√≥n o 
                    consulta compleja.</li>
                    
                    <li><strong>Notificaciones Push Web:</strong> Alertas personalizadas: "Tu consumo de hoy va un 30% 
                    por encima de lo normal", "Tienes una factura pendiente de ‚Ç¨X", "Nueva oferta disponible con ahorro 
                    de ‚Ç¨Y/a√±o". Opt-in con tasa de aceptaci√≥n del 35%.</li>
                </ul>
                
                <p><strong>5. Retenci√≥n Proactiva (Churn Prevention)</strong></p>
                <p>
                    Identificaci√≥n temprana de clientes en riesgo de abandono y activaci√≥n de campa√±as de retenci√≥n 
                    personalizadas.
                </p>
                <ul>
                    <li><strong>Detecci√≥n de Se√±ales de Churn:</strong> Reducci√≥n de engagement, visitas a secci√≥n de 
                    "darme de baja", b√∫squedas de competidores, llamadas a atenci√≥n al cliente con tono negativo, 
                    comparaci√≥n de tarifas en web.</li>
                    
                    <li><strong>Intervenci√≥n Proactiva:</strong> Clientes con churn score > 0.7 reciben llamada de 
                    account manager con oferta personalizada de retenci√≥n. Descuentos, mejoras de servicio, o cambio 
                    de tarifa sin penalizaci√≥n.</li>
                    
                    <li><strong>Win-back Campaigns:</strong> Clientes que se dieron de baja reciben serie de emails 
                    personalizados durante 90 d√≠as con ofertas de reactivaci√≥n. Tasa de win-back: 18%.</li>
                </ul>
            </div>
        </div>
        
        <!-- KPIs y M√©tricas -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">üìä</span>
                KPIs y M√©tricas de √âxito
            </h3>
            <div class="doc-section-content">
                <p>
                    La evaluaci√≥n del sistema de personalizaci√≥n se basa en m√©tricas t√©cnicas que miden la calidad 
                    de las predicciones y recomendaciones generadas por los modelos de IA. Estas m√©tricas permiten 
                    monitorizar el rendimiento del sistema y detectar degradaciones que requieran reentrenamiento.
                </p>
                
                <p><strong>M√©tricas de Ranking y Recomendaci√≥n:</strong></p>
                <ul>
                    <li><strong>NDCG@K (Normalized Discounted Cumulative Gain):</strong> Mide la calidad del ranking 
                    de recomendaciones. Penaliza productos relevantes que aparecen en posiciones bajas. NDCG@10 > 0.75 
                    se considera bueno. F√≥rmula: DCG = Œ£ (2^rel_i - 1) / log2(i + 1), normalizado por el DCG ideal.</li>
                    
                    <li><strong>MAP@K (Mean Average Precision):</strong> Promedio de precisi√≥n calculado en cada 
                    posici√≥n donde aparece un item relevante. MAP@10 > 0.65 indica buen rendimiento. √ötil cuando 
                    hay m√∫ltiples items relevantes por usuario.</li>
                    
                    <li><strong>Hit Rate@K:</strong> Porcentaje de usuarios para los que al menos 1 de los top-K 
                    items recomendados es relevante. Hit Rate@10 > 0.80 es el objetivo. M√©trica simple pero efectiva 
                    para evaluar cobertura de recomendaciones.</li>
                    
                    <li><strong>MRR (Mean Reciprocal Rank):</strong> Inverso de la posici√≥n del primer item relevante. 
                    MRR = 1/rank_first_relevant. MRR > 0.70 indica que items relevantes aparecen en posiciones altas.</li>
                </ul>
                
                <p><strong>M√©tricas de Clasificaci√≥n (Propensi√≥n a Comprar):</strong></p>
                <ul>
                    <li><strong>AUC-ROC (Area Under ROC Curve):</strong> Mide la capacidad del modelo para distinguir 
                    entre clases (compra vs no compra). AUC > 0.85 indica excelente discriminaci√≥n. Independiente del 
                    threshold de clasificaci√≥n.</li>
                    
                    <li><strong>Precision y Recall:</strong> Precision = TP/(TP+FP) mide exactitud de predicciones 
                    positivas. Recall = TP/(TP+FN) mide cobertura de casos positivos. Trade-off entre ambas seg√∫n 
                    caso de uso. F1-Score = 2 √ó (Precision √ó Recall) / (Precision + Recall) combina ambas.</li>
                    
                    <li><strong>Log Loss (Cross-Entropy):</strong> Penaliza predicciones confiadas pero incorrectas. 
                    Log Loss < 0.35 indica buena calibraci√≥n de probabilidades. Importante cuando se usan scores 
                    de probabilidad para decisiones.</li>
                </ul>
                
                <p><strong>M√©tricas de Regresi√≥n (Predicci√≥n de Valores):</strong></p>
                <ul>
                    <li><strong>Precisi√≥n del Modelo (Precision, Recall, F1-Score):</strong> Para modelos de clasificaci√≥n 
                    (ej: propensi√≥n a comprar). Precision = TP / (TP + FP) mide qu√© porcentaje de predicciones positivas 
                    fueron correctas. Recall = TP / (TP + FN) mide qu√© porcentaje de casos positivos reales fueron 
                    detectados. F1-Score = 2 √ó (Precision √ó Recall) / (Precision + Recall) balancea ambas m√©tricas. 
                    Objetivo: F1-Score > 0.80 para modelos de propensi√≥n cr√≠ticos.</li>
                    
                    <li><strong>AUC-ROC (Area Under the Curve - Receiver Operating Characteristic):</strong> Mide la 
                    capacidad del modelo para distinguir entre clases (ej: comprar√° vs. no comprar√°). Valor de 0.5 = 
                    modelo aleatorio, 1.0 = modelo perfecto. Objetivo: AUC-ROC > 0.85 para modelos de propensi√≥n, 
                    > 0.90 para modelos de churn. An√°lisis de curvas ROC para seleccionar threshold √≥ptimo seg√∫n 
                    trade-off deseado entre precision y recall.</li>
                    
                    <li><strong>NDCG (Normalized Discounted Cumulative Gain):</strong> M√©trica est√°ndar para sistemas 
                    de recomendaci√≥n que considera tanto la relevancia como el ranking de las recomendaciones. 
                    NDCG@10 mide la calidad de las top-10 recomendaciones. Objetivo: NDCG@10 > 0.75. Complementar 
                    con m√©tricas de diversidad (Intra-List Diversity) para evitar filter bubbles.</li>
                    
                    <li><strong>Latencia de Inferencia (p50, p95, p99):</strong> Tiempo de respuesta del sistema de 
                    recomendaciones. p50 (mediana) < 50ms, p95 < 100ms, p99 < 200ms. Cr√≠tico para experiencia de 
                    usuario en tiempo real (web, app). Monitorizaci√≥n continua con alertas cuando latencias exceden 
                    SLAs. An√°lisis de cuellos de botella: feature retrieval, model scoring, post-processing.</li>
                    
                    <li><strong>Cobertura de Recomendaciones:</strong> Porcentaje de usuarios que reciben recomendaciones 
                    v√°lidas. Objetivo: > 95% de cobertura. An√°lisis de cold-start problem para usuarios nuevos y 
                    productos nuevos. Estrategias de fallback para casos sin recomendaciones personalizadas.</li>
                    
                    <li><strong>Model Drift Detection:</strong> Monitorizaci√≥n continua de degradaci√≥n de performance. 
                    Comparaci√≥n de distribuciones de features (Population Stability Index - PSI) y m√©tricas de modelo 
                    entre entrenamiento y producci√≥n. Alertas autom√°ticas cuando PSI > 0.25 o AUC-ROC degrada > 5%. 
                    Trigger de reentrenamiento autom√°tico.</li>
                    
                    <li><strong>Feature Importance Stability:</strong> Seguimiento de qu√© features son m√°s importantes 
                    para las predicciones (SHAP values, permutation importance). Cambios dr√°sticos en feature importance 
                    pueden indicar cambios en comportamiento de clientes o problemas de calidad de datos.</li>
                </ul>
                
                <p><strong>M√©tricas de Experiencia de Usuario:</strong></p>
                <ul>
                    <li><strong>Relevance Score:</strong> Encuestas post-interacci√≥n: "¬øQu√© tan relevante fue esta 
                    recomendaci√≥n?" (escala 1-5). Objetivo: score promedio > 4.0. An√°lisis de correlaci√≥n con conversi√≥n.</li>
                    
                    <li><strong>Diversity Score:</strong> Medida de diversidad en las recomendaciones para evitar 
                    monoton√≠a. Balance entre personalizaci√≥n (relevancia) y serendipity (descubrimiento).</li>
                    
                    <li><strong>Fatigue Metrics:</strong> Monitorizaci√≥n de fatiga del cliente por exceso de comunicaciones. 
                    Tracking de unsubscribe rate, spam complaints, y engagement decay. Implementaci√≥n de frequency 
                    capping inteligente.</li>
                </ul>
                
                <div class="doc-highlight-box">
                    <strong>üéØ Objetivos de Precisi√≥n T√©cnica</strong><br>
                    El sistema debe lograr los siguientes benchmarks t√©cnicos para considerarse production-ready:
                    <ul style="margin-top: 10px; margin-bottom: 0;">
                        <li>AUC-ROC > 0.85 en predicci√≥n de conversi√≥n</li>
                        <li>NDCG@10 > 0.75 en recomendaciones de productos</li>
                        <li>F1-Score > 0.80 en propensity scoring</li>
                        <li>Latencia p95 < 100ms para inferencia en tiempo real</li>
                        <li>Cobertura > 95% de usuarios activos</li>
                    </ul>
                </div>
                
                <p><strong>Dashboard de Monitorizaci√≥n:</strong></p>
                <p>
                    Power BI dashboard con actualizaci√≥n diaria que integra todas las m√©tricas anteriores. 
                    Vistas espec√≠ficas para:
                </p>
                <ul>
                    <li><strong>Executive View:</strong> KPIs de negocio de alto nivel, ROI, impacto en revenue</li>
                    <li><strong>Marketing View:</strong> Performance de campa√±as, conversi√≥n por canal, engagement</li>
                    <li><strong>Data Science View:</strong> M√©tricas de modelos, drift detection, feature importance</li>
                    <li><strong>Operations View:</strong> SLAs t√©cnicos, latencias, disponibilidad, errores</li>
                </ul>
            </div>
        </div>
        
        <!-- Implementaci√≥n -->
        <div class="doc-section">
            <h3 class="doc-section-title">
                <span class="icon">üöÄ</span>
                Roadmap de Implementaci√≥n
            </h3>
            <div class="doc-section-content">
                <p>
                    La implementaci√≥n del sistema de personalizaci√≥n sigue un enfoque iterativo y √°gil, con entregas 
                    incrementales de valor cada 2-3 semanas. El roadmap completo abarca 6 meses desde kick-off hasta 
                    producci√≥n completa, con un MVP funcional disponible al final del mes 2.
                </p>
                
                <p><strong>Fase 1 (Mes 1-2): Fundamentos y MVP</strong></p>
                <p>
                    <em>Objetivo: Establecer la infraestructura base y entregar un MVP funcional con recomendaciones 
                    b√°sicas para validar el concepto y generar primeros resultados.</em>
                </p>
                <ul>
                    <li><strong>Semana 1-2: Setup de Infraestructura</strong>
                        <ul>
                            <li>Provisi√≥n de recursos Azure (AKS, Databricks, Synapse, ML Workspace)</li>
                            <li>Configuraci√≥n de redes, seguridad, y accesos (VPN, Azure AD, RBAC)</li>
                            <li>Setup de repositorios Git, CI/CD pipelines (Azure DevOps)</li>
                            <li>Configuraci√≥n de ambientes: Dev, Staging, Production</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 3-4: Integraci√≥n de Fuentes de Datos</strong>
                        <ul>
                            <li>Conectores a sistemas fuente: CRM (Salesforce), Web Analytics (GA4), Smart Meters, 
                            Facturaci√≥n, Transaccional</li>
                            <li>Ingesta batch inicial (carga hist√≥rica de 24 meses)</li>
                            <li>Ingesta streaming para datos en tiempo real (Event Hubs + Stream Analytics)</li>
                            <li>Data quality checks y validaciones autom√°ticas</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 5-6: Pipeline de Datos y Feature Engineering</strong>
                        <ul>
                            <li>Desarrollo de pipeline ETL en Databricks (medallion architecture: bronze ‚Üí silver ‚Üí gold)</li>
                            <li>Feature engineering inicial: 50+ features b√°sicas (consumo, engagement, demogr√°ficas)</li>
                            <li>Feature Store setup para reutilizaci√≥n y consistencia</li>
                            <li>Data profiling y an√°lisis exploratorio (EDA)</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 7-8: Modelo Baseline y MVP</strong>
                        <ul>
                            <li>Entrenamiento de modelo baseline: Collaborative Filtering con ALS</li>
                            <li>Validaci√≥n cruzada y tuning de hyperparameters</li>
                            <li>Deployment de modelo como API REST (Azure ML Endpoints)</li>
                            <li>Integraci√≥n con Salesforce Marketing Cloud para campa√±a piloto</li>
                            <li><strong>üéØ MVP Release:</strong> Campa√±a piloto con 10K clientes, recomendaciones 
                            b√°sicas de productos</li>
                        </ul>
                    </li>
                </ul>
                
                <p><strong>Fase 2 (Mes 3-4): Modelos Avanzados y Escalado</strong></p>
                <p>
                    <em>Objetivo: Mejorar significativamente la precisi√≥n mediante modelos avanzados de deep learning 
                    y propensity scoring. Escalar a toda la base de clientes.</em>
                </p>
                <ul>
                    <li><strong>Semana 9-10: Deep Learning Models</strong>
                        <ul>
                            <li>Implementaci√≥n de Neural Collaborative Filtering (NCF) con TensorFlow</li>
                            <li>Arquitectura: Embeddings (128-dim) + 4 capas fully-connected + dropout</li>
                            <li>Entrenamiento distribuido en GPU cluster (Azure ML Compute)</li>
                            <li>Comparaci√≥n A/B vs. modelo baseline: objetivo +15% en NDCG@10</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 11-12: Propensity Scoring System</strong>
                        <ul>
                            <li>Feature engineering avanzado: 200+ features con t√©cnicas de aggregation, 
                            time-series, y embeddings</li>
                            <li>Entrenamiento de modelos Gradient Boosting (XGBoost, LightGBM) para propensi√≥n 
                            a cada tipo de oferta</li>
                            <li>Calibraci√≥n de probabilidades (Platt Scaling, Isotonic Regression)</li>
                            <li>Validaci√≥n: AUC-ROC > 0.85, calibration plots, lift curves</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 13-14: API de Inferencia en Tiempo Real</strong>
                        <ul>
                            <li>Refactoring de API para latencias < 100ms (p95)</li>
                            <li>Implementaci√≥n de caching inteligente (Redis) con TTL adaptativo</li>
                            <li>Feature serving optimizado: pre-c√≥mputo de features est√°ticas</li>
                            <li>Load testing: 1000 req/s con auto-scaling</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 15-16: Escalado a Producci√≥n</strong>
                        <ul>
                            <li>Rollout gradual: 25% ‚Üí 50% ‚Üí 100% de clientes activos</li>
                            <li>Monitorizaci√≥n intensiva de m√©tricas t√©cnicas y de negocio</li>
                            <li>Ajustes y optimizaciones basados en feedback real</li>
                            <li><strong>üöÄ Production Release:</strong> Sistema disponible para 100% de clientes</li>
                        </ul>
                    </li>
                </ul>
                
                <p><strong>Fase 3 (Mes 5-6): Integraci√≥n Completa y Optimizaci√≥n Continua</strong></p>
                <p>
                    <em>Objetivo: Integraci√≥n end-to-end con todos los canales de marketing, implementaci√≥n de 
                    optimizaci√≥n continua mediante A/B testing, y establecimiento de procesos de MLOps maduros.</em>
                </p>
                <ul>
                    <li><strong>Semana 17-18: Integraci√≥n Omnicanal</strong>
                        <ul>
                            <li>Integraci√≥n completa con Salesforce Marketing Cloud (Journey Builder, Email Studio, 
                            Mobile Studio)</li>
                            <li>Personalizaci√≥n web en tiempo real (Adobe Target o similar)</li>
                            <li>Personalizaci√≥n en app m√≥vil (push notifications, in-app messages)</li>
                            <li>Integraci√≥n con chatbot para recomendaciones contextuales</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 19-20: A/B Testing Framework</strong>
                        <ul>
                            <li>Plataforma de experimentaci√≥n (Optimizely, VWO, o custom)</li>
                            <li>Framework estad√≠stico: c√°lculo de sample size, an√°lisis de significancia, 
                            sequential testing</li>
                            <li>Testing continuo de estrategias de recomendaci√≥n, prompts, CTAs, timing</li>
                            <li>Documentaci√≥n de learnings y best practices</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 21-22: Dashboard de Monitorizaci√≥n y Alerting</strong>
                        <ul>
                            <li>Power BI dashboards con 4 vistas (Executive, Marketing, Data Science, Operations)</li>
                            <li>Alerting proactivo en Slack/Teams para anomal√≠as y degradaciones</li>
                            <li>Integraci√≥n con Azure Monitor y Application Insights</li>
                            <li>Weekly automated reports para stakeholders</li>
                        </ul>
                    </li>
                    
                    <li><strong>Semana 23-24: MLOps y Reentrenamiento Autom√°tico</strong>
                        <ul>
                            <li>Pipeline de reentrenamiento autom√°tico (semanal) con validaci√≥n de calidad</li>
                            <li>Model registry con versionado y governance</li>
                            <li>Automated rollback si nuevo modelo degrada performance</li>
                            <li>Drift detection y alerting autom√°tico</li>
                            <li>Documentaci√≥n completa de procesos y runbooks</li>
                            <li><strong>‚úÖ Go-Live Completo:</strong> Sistema en producci√≥n con optimizaci√≥n continua</li>
                        </ul>
                    </li>
                </ul>
                
                <p><strong>Post-Implementaci√≥n (Mes 7+): Mejora Continua</strong></p>
                <ul>
                    <li><strong>Expansi√≥n de Casos de Uso:</strong> Nuevos tipos de recomendaciones (contenido educativo, 
                    eventos, programas de fidelizaci√≥n)</li>
                    <li><strong>Modelos Avanzados:</strong> Reinforcement Learning para optimizaci√≥n de secuencias, 
                    Causal Inference para medir impacto real</li>
                    <li><strong>Personalizaci√≥n Contextual:</strong> Incorporaci√≥n de contexto en tiempo real (weather, 
                    eventos, trending topics)</li>
                    <li><strong>Explainability:</strong> Implementaci√≥n de SHAP/LIME para explicar recomendaciones 
                    a usuarios y reguladores</li>
                </ul>
                
                <p><strong>Equipo Requerido:</strong></p>
                <ul>
                    <li>1 Product Owner (dedicaci√≥n 50%)</li>
                    <li>1 Scrum Master / Project Manager (dedicaci√≥n 50%)</li>
                    <li>2 Data Scientists (ML Engineers)</li>
                    <li>2 Data Engineers</li>
                    <li>1 MLOps Engineer</li>
                    <li>1 Frontend Developer (para integraciones web/app)</li>
                    <li>1 QA Engineer (testing y validaci√≥n)</li>
                    <li>Soporte de arquitectos cloud y seguridad (seg√∫n necesidad)</li>
                </ul>
                
                <p><strong>Riesgos y Mitigaciones:</strong></p>
                <ul>
                    <li><strong>Riesgo:</strong> Calidad de datos insuficiente ‚Üí <strong>Mitigaci√≥n:</strong> Data quality 
                    assessment en semana 1, plan de remediaci√≥n</li>
                    <li><strong>Riesgo:</strong> Resistencia al cambio de equipos de marketing ‚Üí <strong>Mitigaci√≥n:</strong> 
                    Change management, training, quick wins tempranos</li>
                    <li><strong>Riesgo:</strong> Complejidad de integraciones ‚Üí <strong>Mitigaci√≥n:</strong> POCs t√©cnicos 
                    en fase de discovery, arquitectura desacoplada</li>
                    <li><strong>Riesgo:</strong> Regulaci√≥n GDPR/privacidad ‚Üí <strong>Mitigaci√≥n:</strong> Legal review, 
                    privacy by design, anonimizaci√≥n</li>
                </ul>
                
                <div class="doc-badge info">MVP - Mes 2</div>
                <div class="doc-badge">Producci√≥n - Mes 4</div>
                <div class="doc-badge warning">Optimizaci√≥n - Mes 6</div>
                <div class="doc-badge" style="background: #107C10;">Mejora Continua - Mes 7+</div>
            </div>
        </div>
    </div>
</div>

<div class="use-case-container">
    <div class="use-case-header">
        <div class="use-case-icon">üë§</div>
        <div class="use-case-info">
            <h1>Personalizaci√≥n Hiperpersonalizada</h1>
            <p>Cree experiencias √∫nicas para cada cliente basadas en su perfil de consumo energ√©tico, comportamiento y preferencias.</p>
        </div>
    </div>

    <!-- M√©tricas del Caso de Uso -->
    <div class="metrics-row">
        <div class="metric-box">
            <div class="metric-box-value">+320%</div>
            <div class="metric-box-label">Conversi√≥n</div>
        </div>
        <div class="metric-box">
            <div class="metric-box-value">+65%</div>
            <div class="metric-box-label">Email Open Rate</div>
        </div>
        <div class="metric-box">
            <div class="metric-box-value">5-8x</div>
            <div class="metric-box-label">ROI Marketing</div>
        </div>
        <div class="metric-box">
            <div class="metric-box-value">‚Ç¨100K-300K</div>
            <div class="metric-box-label">Inversi√≥n Inicial</div>
        </div>
    </div>

    <!-- Demo Interactivo -->
    <div class="card">
        <div class="card-header">
            <h2>üéØ Generador de Ofertas Personalizadas con IA</h2>
            <span class="badge badge-success">Activo</span>
        </div>
        <div class="card-body">
            <p class="card-description">
                Seleccione un perfil de cliente para generar autom√°ticamente una oferta personalizada 
                basada en su consumo energ√©tico, comportamiento y preferencias detectadas por IA.
            </p>

            <div class="demo-controls">
                <button class="btn btn-primary" onclick="generarOferta('residencial')">
                    <span>üè†</span> Cliente Residencial
                </button>
                <button class="btn btn-success" onclick="generarOferta('negocio')">
                    <span>üè¢</span> Cliente Negocio
                </button>
                <button class="btn btn-warning" onclick="generarOferta('alto-consumo')">
                    <span>‚ö°</span> Alto Consumo
                </button>
            </div>

            <div id="oferta-output" class="demo-output" style="display: none;">
                <!-- El contenido se carga din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Tecnolog√≠as Utilizadas -->
    <div class="card">
        <div class="card-header">
            <h2>üîß Tecnolog√≠as y Capacidades</h2>
        </div>
        <div class="card-body">
            <div class="tech-grid">
                <div class="tech-item">
                    <div class="tech-icon">ü§ñ</div>
                    <div class="tech-name">Salesforce Einstein</div>
                    <div class="tech-desc">Scoring predictivo y personalizaci√≥n</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üìä</div>
                    <div class="tech-name">Bidgely UtilityAI</div>
                    <div class="tech-desc">An√°lisis consumo energ√©tico</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üéØ</div>
                    <div class="tech-name">Amazon Personalize</div>
                    <div class="tech-desc">Recomendaciones tiempo real</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üí°</div>
                    <div class="tech-name">Brillion</div>
                    <div class="tech-desc">Targeting precisi√≥n 93%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Casos de √âxito -->
    <div class="card">
        <div class="card-header">
            <h2>üìà Resultados Comprobados</h2>
        </div>
        <div class="card-body">
            <div class="success-stories">
                <div class="success-story">
                    <div class="success-company">Octopus Energy</div>
                    <div class="success-metric">80% satisfacci√≥n</div>
                    <div class="success-desc">IA generativa supera humanos en atenci√≥n</div>
                </div>
                <div class="success-story">
                    <div class="success-company">McKinsey Research</div>
                    <div class="success-metric">+10% ventas</div>
                    <div class="success-desc">Utilities con personalizaci√≥n efectiva</div>
                </div>
                <div class="success-story">
                    <div class="success-company">Utilities USA</div>
                    <div class="success-metric">+40% adopci√≥n TOU</div>
                    <div class="success-desc">Programas con mensajes personalizados</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function generarOferta(perfil) {
    const output = document.getElementById('oferta-output');
    output.style.display = 'block';
    output.innerHTML = '<div class="loading-spinner"></div><p class="loading-text">Analizando datos del cliente y generando oferta personalizada...</p>';

    fetch('/api/generar-oferta', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ perfil: perfil })
    })
    .then(response => response.json())
    .then(data => {
        setTimeout(() => {
            const colorClass = data.oferta.color === 'blue' ? 'primary' : 
                              data.oferta.color === 'green' ? 'success' : 'warning';
            
            let detallesHTML = '';
            for (const [key, value] of Object.entries(data.cliente)) {
                if (key !== 'nombre' && key !== 'avatar' && key !== 'segmento') {
                    const label = key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    detallesHTML += `
                        <div class="detail-box">
                            <div class="detail-label">${label}</div>
                            <div class="detail-value">${value}</div>
                        </div>
                    `;
                }
            }

            let beneficiosHTML = '';
            data.oferta.beneficios.forEach(beneficio => {
                beneficiosHTML += `<li>${beneficio}</li>`;
            });

            output.innerHTML = `
                <div class="customer-profile-card">
                    <div class="customer-avatar-large">${data.cliente.avatar}</div>
                    <div class="customer-info-section">
                        <h3>${data.cliente.nombre}</h3>
                        <p class="customer-segment">${data.cliente.segmento}</p>
                        <div class="customer-details-grid">
                            ${detallesHTML}
                        </div>
                    </div>
                </div>

                <div class="oferta-card oferta-${colorClass}">
                    <h3>${data.oferta.titulo}</h3>
                    <p class="oferta-descripcion">${data.oferta.descripcion}</p>
                    <div class="oferta-beneficios">
                        <strong>Incluye:</strong>
                        <ul>${beneficiosHTML}</ul>
                    </div>
                    <div class="oferta-footer">
                        <button class="btn btn-${colorClass} btn-lg">
                            ${data.oferta.cta}
                        </button>
                        <p class="oferta-validez">${data.oferta.validez}</p>
                    </div>
                </div>
            `;
        }, 1500);
    })
    .catch(error => {
        output.innerHTML = '<div class="alert alert-error">Error al generar oferta. Por favor, intenta de nuevo.</div>';
    });
}
</script>
{% endblock %}
